## 9장 디스크 관리

#### 디스크

컴퓨터 시스템의 대표적인 2차 저장장치



### 디스크의 구조

![image-20210707205851063](C:\Users\jundl\AppData\Roaming\Typora\typora-user-images\image-20210707205851063.png)

- 논리블록 : 일정한 크기의 저장공간들로 이루어진 1차원 배열과 같음
- 논리블록의 인텍스 번호로 접근 가능



- 섹터 : 논리블록이 저장되는 물리적인 위치
- 논리블록과 섹터는 1:1 매핑



- 트랙 : 디스크의 물리적인 구조에 해당하는 마그네틱 원판의 구성요소
- 트랙이 나누어진 것이 섹터



- 실린더 : 상대적 위치가 동일한 트랙들의 집합



### 디스크 스케줄링

#### 디스크에 대한 접근시간

- 탐색시간 : 디스크의 헤더를 해당 실린더 위치로 이동시키는데 걸리는 시간
- 회전지연시간 : 디스크가 회전해서 읽고 쓰려는 섹터가 헤드 위치에 도달하기까지의 시간
- 전송시간 : 해당 섹터가 헤드 위치에 도달한 후 데이터를 실제로 섹터에 읽고 쓰는 데 소요되는 시간



#### 디스크 스케줄링

여러 섹터들에 대한 입출력 요청이 들어왔을 때 이들을 어떠한 순서로 처리할지 결정하는 매커니즘

디스크 헤드의 이동거리를 줄이는 것

- **FCFS 스케줄링**

  먼저 들어온 요청을 먼저 처리하는 방식

  탐색시간이 매우 비효율적

  

- **SSTF 스케줄링**

  현재 위치로부터 가장 가까운 위치에 있는 요청을 먼저 처리하는 방식

  기아현상 발생 가능

  

- **SCAN 알고리즘**

  헤드가 디스크 원판의 안쪽 끝과 바깥쪽 끝을 오가며 경로에 존재하는 요청들을 처리하는 방식

  양쪽 끝보다 가운데 위치가 평균 대기시간이 더 짧다.

  

- **C-SCAN 알고리즘**

  SCAN 알고리즘의 위치에 따른 탐색시간의 편차를 보완하기 위한 방식

  헤드가 한쪽 끝에서 반대쪽 끝으로 이동하며 경로에 있는 요청을 모두 처리하고 다시 원래 헤더로 돌아오는 방식

  

- **LOOK과 C-LOOK 알고리즘**

  SCAN과 C-SCAN의 알고리즘과 동일하지만 이동중인 경로에 더이상 요청이 없다면 더이상 가지 않는 방식



### 다중 디스크 환경에서의 스케줄링

다중 디스크의경우 같은 데이터가 저장되어 있는 여러 개의 디스크 중 어느 디스크에서 요청을 처리할지 결정하는 스케줄링 문제 발생

- 일부 디스크가 과부화 상태가 되지않게 해야함

- 전력 절감 측면에서 일부 디스크에 부하를 집중시켜 잔여 디스크를 쉬도록하는 부하편향 기법이 필요

  



### 디스크의 저전력 관리

#### 디스크의 상태

- **활동 상태**

  현재 헤드가 데이터를 읽거나 쓰고 있는 상태

- **공회전 상태**

  디스크가 회전 중이지만 데이터를 읽거나 쓰지는 않는 상태

- **준비 상태**

  디스크가 회전하지는 않지만 인터페이스가 활성화된 상태

- **휴면 상태**

  디스크가 회전하지 않고 인터페이스도 활성화되지 않은 상태



#### 비활성화 기법

- **시간기반 기법**

  일정 시간 동안 디스크가 공회전 상태이면 장치를 정지

- **예측기반 기법**

  과거 요청을 관찰하여 다음 공회전 구간의 길이를 예측한 후 디스크를 비활성화 할 시점을 결정

- **확률기반 기법**

  디바이스의 상태변경 시간 간격을 구하기 위해 확률분포를 통해 요청을 모델링하고 **마르코프 체인**과 같은 통계적 모델을 이용



#### 회전속도 조절 기법

운영체제에서 전력 소모를 최소화하기 위해 디스크의 회전속도를 관리하는 지능형 전력 관리 기법



#### 디스크의 데이터 배치 기법

디스크 내에 데이터의 복제본을 많이 만들어 헤드 위치에서 가까운 복제본에 접근하도록 함으로써 빠른 응답시간과 전력 소모량 절감을 얻는 **FS2 파일 시스템**



#### 버퍼캐싱 및 사전인출 기법

미래에 요청될 데이터를 예측가능하다면 디스크가 활성 상태일 때 헤드 위치로부터 가까운 데이터를 사전인출하여 향후 디스크의 비활성화 가능성을 높이는 기법



#### 쓰기전략을 통한 저전력 디스크 기법

저장장치의 데이터에 대한 쓰기전략을 통해 전력 소모를 줄이는 기법

디스크가 비활성 상태이면 기다렸다가 활성상태가 되었을때 쓰는 방식